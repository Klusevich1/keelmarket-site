{"ast":null,"code":"import React,{useContext,useState}from'react';import{AppContext}from'../context/AppContext';import Cross from'../../resources/images/cross.svg';import'../../resources/css/LoginFormModal.css';import{PhoneInput}from'react-international-phone';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const LoginFormModal=()=>{const[inputFullName,setInputFullName]=useState('');const[phoneNumber,setPhoneNumber]=useState('');// Хранение номера телефона\nconst[inputEmail,setInputEmail]=useState('');const[inputCompany,setInputCompany]=useState('');const[isSubmit,setIsSubmit]=useState(false);const context=useContext(AppContext);const[errors,setErrors]=useState({});// Валидация при отправке формы\nconst validateForm=()=>{const newErrors={};if(!inputFullName)newErrors.fullName=true;if(!phoneNumber)newErrors.phone=true;if(!inputEmail)newErrors.email=true;if(!inputCompany)newErrors.company=true;setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleFieldChange=(field,value)=>{switch(field){case'fullName':setInputFullName(value);setErrors(prev=>({...prev,fullName:value===''}));break;case'phone':setPhoneNumber(value);setErrors(prev=>({...prev,phone:value===''}));break;case'email':setInputEmail(value);setErrors(prev=>({...prev,email:value===''}));break;case'company':setInputCompany(value);setErrors(prev=>({...prev,company:value===''}));break;default:break;}};if(!context){throw new Error('Card должен быть использован внутри AppContextProvider');}const{modalOpen,toggleModal}=context;async function fetchData(event){event.preventDefault();if(!validateForm()){return;// Останавливаем отправку, если есть ошибки\n}try{setIsSubmit(true);const response=await fetch('https://keelmarket.co.uk'+'/sendMail',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:inputFullName,phone:phoneNumber,email:inputEmail,company:inputCompany})});const data=await response.json();if(!response.ok){console.error(data.message);return;}window.location.reload();window.scrollTo(0,0);}catch(error){console.error(error.message);}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:`login-form-modal-container ${modalOpen?'active':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(\"img\",{src:Cross,style:{cursor:'pointer'},alt:\"Cross\",onClick:toggleModal})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Get in touch with us\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:fetchData,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginFullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full name\",className:`input-field ${errors.fullName?'input-error':''}`,disabled:isSubmit,id:\"inputLoginFullName\",value:inputFullName,onChange:e=>handleFieldChange('fullName',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginPhone\",children:\"Phone\"}),/*#__PURE__*/_jsx(PhoneInput,{defaultCountry:\"gb\",value:phoneNumber,onChange:phoneNumber=>handleFieldChange('phone',phoneNumber),style:{height:'45px'},className:`${errors.phone?'phone-input-error':''}`,disabled:isSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",className:`input-field ${errors.email?'input-error':''}`,disabled:isSubmit,id:\"inputLoginEmail\",value:inputEmail,onChange:e=>handleFieldChange('email',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginCompanyName\",children:\"Your company name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Company name\",className:`input-field ${errors.company?'input-error':''}`,disabled:isSubmit,id:\"inputLoginCompanyName\",value:inputCompany,onChange:e=>handleFieldChange('company',e.target.value)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:`submit-btn ${isSubmit&&'disabled'}`,disabled:isSubmit,children:\"Submit now\"})]})]})});};","map":{"version":3,"names":["React","useContext","useState","AppContext","Cross","PhoneInput","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginFormModal","inputFullName","setInputFullName","phoneNumber","setPhoneNumber","inputEmail","setInputEmail","inputCompany","setInputCompany","isSubmit","setIsSubmit","context","errors","setErrors","validateForm","newErrors","fullName","phone","email","company","Object","keys","length","handleFieldChange","field","value","prev","Error","modalOpen","toggleModal","fetchData","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","name","data","json","ok","console","error","message","window","location","reload","scrollTo","children","className","style","textAlign","src","cursor","alt","onClick","onSubmit","htmlFor","type","placeholder","disabled","id","onChange","e","target","defaultCountry","height"],"sources":["D:/Front-end/Projects/KeelMarketLLP/UI/client.react/src/views/components/LoginFormModal.tsx"],"sourcesContent":["import React, { useContext, useState } from 'react'\r\nimport { AppContext } from '../context/AppContext';\r\nimport Cross from '../../resources/images/cross.svg'\r\nimport '../../resources/css/LoginFormModal.css'\r\nimport { PhoneInput } from 'react-international-phone';\r\n\r\nexport const LoginFormModal = () => {\r\n    const [inputFullName, setInputFullName] = useState<string>('');\r\n    const [phoneNumber, setPhoneNumber] = useState(''); // Хранение номера телефона\r\n    const [inputEmail, setInputEmail] = useState<string>('');\r\n    const [inputCompany, setInputCompany] = useState<string>('');\r\n    const [isSubmit, setIsSubmit] = useState<boolean>(false)\r\n    const context = useContext(AppContext);\r\n    const [errors, setErrors] = useState<{ fullName?: boolean; phone?: boolean; email?: boolean; company?: boolean }>({});\r\n\r\n    // Валидация при отправке формы\r\n    const validateForm = () => {\r\n        const newErrors: { fullName?: boolean; phone?: boolean; email?: boolean; company?: boolean } = {};\r\n        if (!inputFullName) newErrors.fullName = true;\r\n        if (!phoneNumber) newErrors.phone = true;\r\n        if (!inputEmail) newErrors.email = true;\r\n        if (!inputCompany) newErrors.company = true;\r\n        setErrors(newErrors);\r\n        return Object.keys(newErrors).length === 0;\r\n    };\r\n\r\n    const handleFieldChange = (field: string, value: string) => {\r\n        switch (field) {\r\n            case 'fullName':\r\n                setInputFullName(value);\r\n                setErrors(prev => ({ ...prev, fullName: value === '' }));\r\n                break;\r\n            case 'phone':\r\n                setPhoneNumber(value);\r\n                setErrors(prev => ({ ...prev, phone: value === '' }));\r\n                break;\r\n            case 'email':\r\n                setInputEmail(value);\r\n                setErrors(prev => ({ ...prev, email: value === '' }));\r\n                break;\r\n            case 'company':\r\n                setInputCompany(value);\r\n                setErrors(prev => ({ ...prev, company: value === '' }));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n\r\n    if (!context) {\r\n        throw new Error('Card должен быть использован внутри AppContextProvider');\r\n    }\r\n\r\n    const {modalOpen, toggleModal} = context;\r\n\r\n    async function fetchData(event: any) {\r\n        event.preventDefault();\r\n        if (!validateForm()) {\r\n            return; // Останавливаем отправку, если есть ошибки\r\n        }\r\n        try {\r\n            setIsSubmit(true)\r\n            const response = await fetch('https://keelmarket.co.uk' + '/sendMail', {\r\n                method: 'POST',\r\n                headers: {'Content-Type': 'application/json'},\r\n                body: JSON.stringify({\r\n                    name: inputFullName,\r\n                    phone: phoneNumber,\r\n                    email: inputEmail,\r\n                    company: inputCompany\r\n                })\r\n            });\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                console.error(data.message);\r\n                return;\r\n            }\r\n            window.location.reload();\r\n            window.scrollTo(0,0)\r\n        } catch (error: any) {\r\n            console.error(error.message);\r\n        }\r\n    }\r\n\r\n  return (\r\n    <>\r\n        <div className={`login-form-modal-container ${modalOpen ? 'active' : ''}`}>\r\n            <div>\r\n                <div style={{textAlign: 'right'}}>\r\n                    <img src={Cross} style={{cursor: 'pointer'}} alt=\"Cross\" onClick={toggleModal}/>\r\n                </div>\r\n                <h3>Get in touch with us</h3>\r\n            </div>\r\n            <form onSubmit={fetchData}>\r\n                <div className='form-inputs'>\r\n                    <div className=\"input-block\">\r\n                        <label htmlFor='inputLoginFullName'>Full Name</label>\r\n                        <input type=\"text\" placeholder='Full name' className={`input-field ${errors.fullName ? 'input-error' : ''}`} disabled={isSubmit} id='inputLoginFullName' value={inputFullName} onChange={(e) => handleFieldChange('fullName', e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"input-block\">\r\n                        <label htmlFor='inputLoginPhone'>Phone</label>\r\n                        <PhoneInput\r\n                            defaultCountry=\"gb\"\r\n                            value={phoneNumber}\r\n                            onChange={(phoneNumber) => handleFieldChange('phone', phoneNumber)}\r\n                            style={{height: '45px'}}\r\n                            className={`${errors.phone ? 'phone-input-error' : ''}`} \r\n                            disabled={isSubmit}\r\n                        />\r\n                    </div>\r\n                    <div className=\"input-block\">\r\n                        <label htmlFor='inputLoginEmail'>Email</label>\r\n                        <input type=\"text\" placeholder='Email' className={`input-field ${errors.email ? 'input-error' : ''}`} disabled={isSubmit} id='inputLoginEmail' value={inputEmail} onChange={(e) => handleFieldChange('email', e.target.value)}/>\r\n                    </div>\r\n                    <div className=\"input-block\">\r\n                        <label htmlFor='inputLoginCompanyName'>Your company name</label>\r\n                        <input type=\"text\" placeholder='Company name' className={`input-field ${errors.company ? 'input-error' : ''}`} disabled={isSubmit}  id='inputLoginCompanyName' value={inputCompany} onChange={(e) => handleFieldChange('company', e.target.value)}/>\r\n                    </div>\r\n                </div>\r\n                <button className={`submit-btn ${isSubmit && 'disabled'}`} disabled={isSubmit}>Submit now</button>\r\n            </form>\r\n        </div>\r\n        \r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}