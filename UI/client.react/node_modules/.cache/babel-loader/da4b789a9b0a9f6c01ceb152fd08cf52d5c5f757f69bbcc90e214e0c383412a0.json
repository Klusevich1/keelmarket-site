{"ast":null,"code":"import React,{useContext,useState}from'react';import{AppContext}from'../context/AppContext';import Cross from'../../resources/images/cross.svg';import'../../resources/css/LoginFormModal.css';import{PhoneInput}from'react-international-phone';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const LoginFormModal=()=>{const[inputFullName,setInputFullName]=useState('');const[phoneNumber,setPhoneNumber]=useState('');// Хранение номера телефона\nconst[inputEmail,setInputEmail]=useState('');const[inputCompany,setInputCompany]=useState('');const[isSubmit,setIsSubmit]=useState(false);const context=useContext(AppContext);const[errors,setErrors]=useState({});// Валидация при отправке формы\nconst validateForm=()=>{const newErrors={};if(!inputFullName)newErrors.fullName=true;if(!phoneNumber)newErrors.phone=true;if(!inputEmail)newErrors.email=true;if(!inputCompany)newErrors.company=true;setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleFieldChange=(field,value)=>{switch(field){case'fullName':setInputFullName(value);setErrors(prev=>({...prev,fullName:value===''}));break;case'phone':setPhoneNumber(value);setErrors(prev=>({...prev,phone:value===''}));break;case'email':setInputEmail(value);setErrors(prev=>({...prev,email:value===''}));break;case'company':setInputCompany(value);setErrors(prev=>({...prev,company:value===''}));break;default:break;}};if(!context){throw new Error('Card должен быть использован внутри AppContextProvider');}const{modalOpen,toggleModal}=context;async function fetchData(event){event.preventDefault();if(!validateForm()){return;// Останавливаем отправку, если есть ошибки\n}try{setIsSubmit(true);const response=await fetch(process.env.REACT_APP_SERVER_URL+'/api/sendmail',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:inputFullName,phone:phoneNumber,email:inputEmail,company:inputCompany})});const data=await response.json();if(!response.ok){console.error(data.message);return;}window.location.reload();window.scrollTo(0,0);}catch(error){console.error(error.message);}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:`login-form-modal-container ${modalOpen?'active':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right'},children:/*#__PURE__*/_jsx(\"img\",{src:Cross,style:{cursor:'pointer'},alt:\"Cross\",onClick:toggleModal})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Get in touch with us\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:fetchData,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginFullName\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full name\",className:`input-field ${errors.fullName?'input-error':''}`,disabled:isSubmit,id:\"inputLoginFullName\",value:inputFullName,onChange:e=>handleFieldChange('fullName',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginPhone\",children:\"Phone\"}),/*#__PURE__*/_jsx(PhoneInput,{defaultCountry:\"gb\",value:phoneNumber,onChange:phoneNumber=>handleFieldChange('phone',phoneNumber),style:{height:'45px'},className:`${errors.phone?'phone-input-error':''}`,disabled:isSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginEmail\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",className:`input-field ${errors.email?'input-error':''}`,disabled:isSubmit,id:\"inputLoginEmail\",value:inputEmail,onChange:e=>handleFieldChange('email',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-block\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputLoginCompanyName\",children:\"Your company name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Company name\",className:`input-field ${errors.company?'input-error':''}`,disabled:isSubmit,id:\"inputLoginCompanyName\",value:inputCompany,onChange:e=>handleFieldChange('company',e.target.value)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:`submit-btn ${isSubmit&&'disabled'}`,disabled:isSubmit,children:\"Submit now\"})]})]})});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}